<html>
    <head>
        <title>Jester Darylhans Ramos</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">
        <link rel ="stylesheet" href="style.css">
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-auth.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
        <script>
            // Your web app's Firebase configuration
            var firebaseConfig = {
                apiKey: "AIzaSyC40PHQz0i1SMGDe7_T3hfRvDCmzW43HBs",
                authDomain: "ccapdev-resume-e6d6d.firebaseapp.com",
                databaseURL: "https://ccapdev-resume-e6d6d.firebaseio.com",
                projectId: "ccapdev-resume-e6d6d",
                storageBucket: "ccapdev-resume-e6d6d.appspot.com",
                messagingSenderId: "56710526730",
                appId: "1:56710526730:web:825af4bddef85f9013ecf3"
            };
            // Initialize Firebase
            var defaultProject = firebase.initializeApp(firebaseConfig);
            var db = firebase.firestore()
        </script>
    </head>

    <body>
        <div id ="login">
            <form class ="text-light">
                <p>Login</p>
                <input type="email" id="email" placeholder="email">
                <input type="password" id="password" placeholder="password">
                <button onclick ="login()" type="button" class="btn bg-secondary text-dark" id="login_btn">Login to account</button>
            </form>
        </div>
        <div id ="add_school_div" class="d-none">
            <form class="text-light" id="add_school_form">
                <p>Input school details</p>
                <input type="text" name="schoolName_input" placeholder="School Name">
                <input type="text" name="level_input" placeholder="Level of Education">
                <input type="text" name="years_input" placeholder="Years Studied">
                <input type="text" name="schoolLogo_input" placeholder="School Logo Link">
                <button type="submit" class="btn bg-secondary text-dark" id="add_school_btn">Add</button>
                <button onclick ="cancel_add_school()" type="button" class="btn bg-secondary text-dark" id="cancel_school_btn">Cancel</button>
            </form>
        </div>
        <div id ="add_org_div" class="d-none">
            <form class="text-light" id="add_org_form">
                <p>Input organization details</p>
                <input type="text" name="orgName_input" placeholder="Organization Name">
                <input type="text" name="position_input" placeholder="Position in Org.">
                <input type="text" name="orgYearsStart_input" placeholder="Year Started">
                <input type="text" name="orgYearsEnd_input" placeholder="Year Ended">
                <button type="submit" class="btn bg-secondary text-dark" id="add_org_btn">Add</button>
                <button onclick ="cancel_add_org()" type="button" class="btn bg-secondary text-dark" id="cancel_org_btn">Cancel</button>
            </form>
        </div>
        <div id ="add_work_div" class="d-none">
            <form class="text-light" id="add_work_form">
                <p>Input past work details</p>
                <input type="text" name="workTitle_input" placeholder="Project Title">
                <input type="text" name="workStarted_input" placeholder="Start of project">
                <input type="text" name="description_input" placeholder="Short description">
                <input type="text" name="workLink_input" placeholder="Github link of project">
                <button type="submit" class="btn bg-secondary text-dark" id="add_work_btn">Add</button>
                <button onclick ="cancel_add_work()" type="button" class="btn bg-secondary text-dark" id="cancel_work_btn">Cancel</button>
            </form>
        </div>
        <div id ="edit_intro_div" class="d-none">
            <form class="text-light" id="edit_intro_form">
                <p>Edit introduction paragraph</p>
                <textarea form="edit_intro_form" name="intro_input" id="intro_area"></textarea>
                <button type="submit" class="btn bg-secondary text-dark" id="edit_intro_btn">Edit</button>
                <button onclick ="cancel_edit_intro()" type="button" class="btn bg-secondary text-dark" id="cancel_intro_btn">Cancel</button>
            </form>
        </div>
        <div id ="edit_contacts_div" class="d-none">
            <form class ="text-light" id="edit_contacts_form">
                <p>Input past work details</p>
                <input type="text" name="facebook_input" id="facebook_area" placeholder="Facebook Link">
                <input type="text" name="github_input" id="github_area" placeholder="Github Link">
                <input type="text" name="linkedin_input" id="linkedin_area" placeholder="LinkedIn Link">
                <button type="submit" class="btn bg-secondary text-dark" id="edit_contacts_btn">Edit</button>
                <button onclick ="cancel_edit_contacts()" type="button" class="btn bg-secondary text-dark" id="cancel_contacts_btn">Cancel</button>
            </form>
        </div>
        <div class ="container-fluid mx-auto align-middle d-none" id="main_container">
            <nav class ="navbar navbar-expand sticky-top navbar-dark bg-primary">
                    <span class="navbar-brand mb-0 h1 text-light">Hans Ramos</span>
                    <a class="nav-item nav-link text-light" href="#about_div">About Me</a>
                    <a class="nav-item nav-link text-light" href="#education_div">Educational Background</a>
                    <a class="nav-item nav-link text-light" href="#org_div">Organizations</a>
                    <a class="nav-item nav-link text-light" href="#works_div">Past Works</a>
                    <a class="nav-item nav-link text-light" href="#contacts_div">Contact Links</a>
                    <button onclick ="logout()" type="button" class="btn text-light" id="logout">Logout</button>
            </nav>
            <div class="divider my-2" id ="about_div">
            </div>
            <div class="bg-primary text-light row mx-auto"  id="about">
                <h3 class="col-10">About Me</h3>
                <button onclick ="intro_form()" type="button" class="btn text-dark col-2 bg-secondary" id="edit_intro_btn">Edit introduction</button>
            </div>
            <div class="divider my-2" id ="education_div">
            </div>
            <div class="bg-primary text-light row mx-auto justify-content" id="education">
                <h3 class="col-11">Education</h3>
                <button onclick ="school_form()" type="button" class="btn text-dark col-1 bg-secondary" id="add_school">+</button>
            </div>
            <div class="divider my-2" id="org_div">
            </div>
            <div class="bg-primary text-light row mx-auto" id="organizations">
                <h3 class="col-11">Organizations</h3>
                <button onclick ="org_form()" type="button" class="btn text-dark col-1 bg-secondary" id="add_org">+</button>
            </div>
            <div class="divider my-2" id="works_div">
            </div>        
            <div class="bg-primary text-light row mx-auto"  id="works">
                <h3 class="col-11">Past Works</h3>
                <button onclick ="work_form()" type="button" class="btn text-dark col-1 bg-secondary" id="add_work">+</button>
            </div>
            <div class="divider my-2" id="contacts_div">
            </div>
            <div class="bg-primary text-light row mx-auto" id="contacts">
                <h3 class="col-10">Contact Links</h3>
                <button onclick ="contacts_form()" type="button" class="btn text-dark col-2 bg-secondary" id="edit_contacts">Edit contact links</button>
            </div>
        </div>
        
        <script src="edit.js"></script>
        
        <!-- <script>
            firebase.auth().onAuthStateChanged(function(user){
                if(user) {
                    //User is signed in
                    document.getElementById("login").classList.add("d-none");
                    document.getElementById("main_container").classList.remove("d-none");
                }
                else{
                    //No user is signed in
                    document.getElementById("login").classList.remove("d-none");
                    document.getElementById("main_container").classList.add("d-none");
                }
            })
            function login(){
                var userEmail = document.getElementById("email").value;
                var userPassword = document.getElementById("password").value;
                firebase.auth().signInWithEmailAndPassword(userEmail, userPassword).catch(function(error) {
                    // Handle Errors here.
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    window.alert("Error: " + errorMessage);
                // ...
                });
            }

            function logout(){
                firebase.auth().signOut().then(function() {
                    // Sign-out successful.
                    }).catch(function(error) {
                    // An error happened.
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    window.alert("Error: " + errorMessage);
                });
            }
        </script>

        <script>
            function school_form(){
                document.getElementById("main_container").classList.add("d-none");
                document.getElementById("add_school_div").classList.remove("d-none");
            }

            const schoolform = document.querySelector('#add_school_form');
            schoolform.addEventListener('submit',(e) =>{
                e.preventDefault();
                db.collection('educations').add({
                    school: schoolform.schoolName_input.value,
                    level: schoolform.level_input.value,
                    years: schoolform.years_input.value,
                    logo: schoolform.schoolLogo_input.value
                })
                schoolform.reset();
                document.getElementById("add_school_div").classList.add("d-none");
                document.getElementById("main_container").classList.remove("d-none");
            })

            function cancel_add_school(){
                schoolform.reset();
                document.getElementById("add_school_div").classList.add("d-none");
                document.getElementById("main_container").classList.remove("d-none");
            }
        </script>

        <script>
            function org_form(){
                document.getElementById("main_container").classList.add("d-none");
                document.getElementById("add_org_div").classList.remove("d-none");
            }

            const orgform = document.querySelector('#add_org_form');
            orgform.addEventListener('submit',(e) =>{
                e.preventDefault();
                db.collection('organizations').add({
                    name: orgform.orgName_input.value,
                    position: orgform.position_input.value,
                    year_started: orgform.orgYearsStart_input.value,
                    year_ended: orgform.orgYearsEnd_input.value
                })
                orgform.reset();
                document.getElementById("add_org_div").classList.add("d-none");
                document.getElementById("main_container").classList.remove("d-none");
            })

            function cancel_add_org(){
                orgform.reset();
                document.getElementById("add_org_div").classList.add("d-none");
                document.getElementById("main_container").classList.remove("d-none");
            }
        </script>

        <script>
            function work_form(){
                document.getElementById("main_container").classList.add("d-none");
                document.getElementById("add_work_div").classList.remove("d-none");
            }

            const workform = document.querySelector('#add_work_form');
            workform.addEventListener('submit',(e) =>{
                e.preventDefault();
                db.collection('works').add({
                    title: workform.workTitle_input.value,
                    year_started: workform.workStarted_input.value,
                    description: workform.description_input.value,
                    link: workform.workLink_input.value
                })
                workform.reset();
                document.getElementById("add_work_div").classList.add("d-none");
                document.getElementById("main_container").classList.remove("d-none");
            })

            function cancel_add_work(){
                workform.reset();
                document.getElementById("add_work_div").classList.add("d-none");
                document.getElementById("main_container").classList.remove("d-none");
            }
        </script>

        <script>
            function intro_form(){
                document.getElementById("main_container").classList.add("d-none");
                document.getElementById("edit_intro_div").classList.remove("d-none");
                document.getElementById("intro_area").value = document.getElementById("intro").innerHTML;
            }

            const introform = document.querySelector('#edit_intro_form');
            introform.addEventListener('submit',(e) =>{
                e.preventDefault();
                db.collection('others').doc('OvLHZizFUklqA1QNxMYK').update({
                    intro: introform.intro_input.value
                })
                introform.reset();
                document.getElementById("edit_intro_div").classList.add("d-none");
                document.getElementById("main_container").classList.remove("d-none");
            })

            function cancel_edit_intro(){
                introform.reset();
                document.getElementById("edit_intro_div").classList.add("d-none");
                document.getElementById("main_container").classList.remove("d-none");
            }
        </script>


        <script>
            function contacts_form(){
                document.getElementById("main_container").classList.add("d-none");
                document.getElementById("edit_contacts_div").classList.remove("d-none");
                document.getElementById("facebook_area").value = document.getElementById("fb_link").href;
                document.getElementById("github_area").value = document.getElementById("git_link").href;
                document.getElementById("linkedin_area").value = document.getElementById("li_link").href;
            }

            const contactsform = document.querySelector('#edit_contacts_form');
            contactsform.addEventListener('submit',(e) =>{
                e.preventDefault();
                db.collection('others').doc('OvLHZizFUklqA1QNxMYK').update({
                    facebook: contactsform.facebook_input.value,
                    github: contactsform.github_input.value,
                    linkedin: contactsform.linkedin_input.value,
                })
                contactsform.reset();
                document.getElementById("edit_contacts_div").classList.add("d-none");
                document.getElementById("main_container").classList.remove("d-none");
            })

            function cancel_edit_contacts(){
                contactsform.reset();
                document.getElementById("edit_contacts_div").classList.add("d-none");
                document.getElementById("main_container").classList.remove("d-none");
            }
        </script>


        <script>
            db.collection('others').get().then((snapshot)=> {
                snapshot.docs.forEach(doc => {
                    getIntro(doc);
                })
            })
            function getIntro(doc){
                let parent = document.getElementById("about");
                let data = doc.data();
                
                let about = document.createElement("div");
                let intro = document.createElement("p");
                intro.setAttribute("id","intro");
                intro.classList.add("center-text");
                let pic = document.createElement("img");
                pic.classList.add("rounded-circle", "float-left", "img-fluid","profile_pic");
                intro.innerHTML = data.intro;
                pic.src= data.picture;
                
                about.appendChild(pic);
                about.appendChild(intro);
                parent.appendChild(about);
            }

            db.collection('educations').orderBy('years').get().then((snapshot)=> {
                snapshot.docs.forEach(doc => {
                    getEducation(doc);
                })
            })

            function getEducation(doc){
                let parent = document.getElementById("education");
                let data = doc.data();
                let school = document.createElement("div");
                school.setAttribute('data-id', doc.id);
                school.classList.add("px-1", "col-12", "my-2");
                let logo = document.createElement("img");
                logo.classList.add("logo", "float-left", "m-2");
                let list = document.createElement("ul");
                let schoolName = document.createElement("li");
                schoolName.setAttribute("id", "school");
                let level = document.createElement("li");
                level.setAttribute("id","level");
                let years = document.createElement("li");
                years.setAttribute("id","years");
                let button = document.createElement("button");
                button.setAttribute("id","delete_school");
                button.classList.add("bg-secondary", "text-dark","btn","mx-auto","float-right");

                logo.src = data.logo;
                schoolName.innerHTML = data.school;
                level.innerHTML = data.level;
                years.innerHTML = data.years;
                button.innerHTML = "Delete";

                school.appendChild(button);
                school.appendChild(logo);
                list.appendChild(schoolName);
                list.appendChild(level);
                list.appendChild(years);
                school.appendChild(list)
                parent.appendChild(school);

                button.addEventListener('click',(e)=>{
                    e.stopPropagation();
                    let id = e.target.parentElement.getAttribute('data-id');
                    db.collection('educations').doc(id).delete();
                })
            }
            
            db.collection('organizations').orderBy('name').get().then((snapshot)=> {
                snapshot.docs.forEach(doc => {
                    getOrganization(doc);
                })
            })

            function getOrganization(doc){
                let parent = document.getElementById("organizations");
                let data = doc.data();
                let org = document.createElement("div");
                org.setAttribute('data-id', doc.id);
                org.classList.add("col-12", "my-2");
                let list = document.createElement("ul");
                let orgName = document.createElement("li");
                let position = document.createElement("li");
                let years = document.createElement("li");
                let yearStart = document.createElement("span");
                let yearEnd = document.createElement("span");
                orgName.setAttribute("id", "name");
                position.setAttribute("id","position");
                yearStart.setAttribute("id","year_started");
                yearEnd.setAttribute("id","year_ended");
                let button = document.createElement("button");
                button.setAttribute("id","delete_org");
                button.classList.add("bg-secondary", "text-dark","btn","mx-auto","float-right");

                orgName.innerHTML = data.name;
                position.innerHTML = ("Position: " + data.position);
                yearStart.innerHTML = data.year_started;
                yearEnd.innerHTML = data.year_ended;
                years.innerHTML = ("Years active: " + yearStart.innerHTML + "-" + yearEnd.innerHTML);
                button.innerHTML = "Delete";

                org.appendChild(button);
                list.appendChild(orgName);
                list.appendChild(position);
                list.appendChild(years);
                org.appendChild(list);
                parent.appendChild(org);

                button.addEventListener('click',(e)=>{
                    e.stopPropagation();
                    let id = e.target.parentElement.getAttribute('data-id');
                    db.collection('organizations').doc(id).delete();
                })
            }
           
            db.collection('works').orderBy('title').get().then((snapshot)=> {
                snapshot.docs.forEach(doc => {
                    getWork(doc);
                })
            })

            function getWork(doc){
                let parent = document.getElementById("works");
                let data = doc.data();
                let work = document.createElement("div");
                work.setAttribute('data-id',doc.id);
                work.classList.add("col-12","my-2");
                let list = document.createElement("ul");
                let title = document.createElement("li");
                let year = document.createElement("li");
                let desc = document.createElement("li");
                let link = document.createElement("a");
                let githubLink = document.createElement("li");
                title.setAttribute("id", "title");
                year.setAttribute("id","year_started");
                desc.setAttribute("id","description");
                link.setAttribute("id","link");
                let button = document.createElement("button");
                button.setAttribute("id","delete_work");
                button.classList.add("bg-secondary", "text-dark","btn","float-right");

                title.innerHTML = data.title;
                year.innerHTML = data.year_started;
                desc.innerHTML = data.description;
                link.href = data.link;
                link.innerHTML = data.title;
                githubLink.innerHTML = ("Github Link: ");
                button.innerHTML = "Delete";

                work.appendChild(button);
                list.appendChild(title);
                list.appendChild(year);
                list.appendChild(desc);
                githubLink.appendChild(link);
                list.appendChild(githubLink);
                work.appendChild(list);
                parent.appendChild(work);

                button.addEventListener('click',(e)=>{
                    e.stopPropagation();
                    let id = e.target.parentElement.getAttribute('data-id');
                    db.collection('works').doc(id).delete();
                })
            }

            db.collection('others').get().then((snapshot)=> {
                snapshot.docs.forEach(doc => {
                    getContacts(doc);
                })
            })


            function getContacts(doc){
                let parent = document.getElementById("contacts");
                let data = doc.data(); 
                let list = document.createElement("ul");
                let fb_bullet = document.createElement("li");
                let fb_link = document.createElement("a");
                let fb_div = document.createElement("div");
                let git_bullet = document.createElement("li");
                let git_link = document.createElement("a");
                let git_div = document.createElement("div");
                let li_bullet = document.createElement("li");
                let li_link = document.createElement("a");
                let li_div = document.createElement("div");
                fb_div.setAttribute("id","facebook");
                fb_div.classList.add("my-2");
                fb_link.setAttribute("id","fb_link");
                git_div.setAttribute("id","github");
                git_div.classList.add("my-2");
                git_link.setAttribute("id","git_link");
                li_div.setAttribute("id","linkedin");
                li_div.classList.add("my-2");
                li_link.setAttribute("id","li_link");

                fb_link.href = data.facebook;
                git_link.href = data.github;
                li_link.href = data.linkedin;

                fb_link.appendChild(fb_div);
                git_link.appendChild(git_div);
                li_link.appendChild(li_div);

                fb_bullet.appendChild(fb_link);
                git_bullet.appendChild(git_link);
                li_bullet.appendChild(li_link);

                list.appendChild(fb_bullet);
                list.appendChild(git_bullet);
                list.appendChild(li_bullet);
                parent.append(list);
            }

        </script> -->
    </body>
</html>